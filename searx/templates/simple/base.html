<!DOCTYPE html>
<html
  class="no-js theme-{{ preferences.get_value('simple_style') or 'auto' }} center-aligment-{{ preferences.get_value('center_alignment') and 'yes' or 'no' }}"
  lang="{{ locale_rfc5646 }}" {% if rtl %} dir="rtl" {% endif %}>

<head>
  <!-- Google tag (gtag.js) -->
  <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-PL11GW977Y"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-PL11GW977Y');
  </script> -->
  <meta charset="UTF-8" />
  <meta name="description" content="SearXNG — a privacy-respecting, open metasearch engine">
  <meta name="keywords" content="SearXNG, search, search engine, metasearch, meta search">
  <meta name="generator" content="searxng/{{ searx_version }}">
  <meta name="referrer" content="no-referrer">
  <meta name="robots" content="noarchive">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="HandheldFriendly" content="True">
  <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
  <!-- <meta name="google-adsense-account" content="ca-pub-5765281256889800"> -->
  <title>{% block title %}{% endblock %}{{ instance_name }}</title>
  {% block meta %}{% endblock %}
  {% if rtl %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/searxng-rtl.min.css') }}" type="text/css"
    media="screen" />
  {% else %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/searxng.min.css') }}" type="text/css"
    media="screen" />
  {% endif %}
  {% if get_setting('server.limiter') %}
  <link rel="stylesheet" href="{{ url_for('client_token', token=link_token) }}" type="text/css" />
  {% endif %}
  {% block styles %}{% endblock %}
  <!--[if gte IE 9]>-->
  <script src="{{ url_for('static', filename='js/searxng.head.min.js') }}"
    client_settings="{{ client_settings }}"></script>
  <!--<![endif]-->
  {% block head %}
  <link title="{{ instance_name }}" type="application/opensearchdescription+xml" rel="search"
    href="{{ opensearch_url }}" />
  {% endblock %}
  <link rel="icon" href="{{ url_for('static', filename='img/favicon.png') }}" sizes="any">
  <link rel="icon" href="{{ url_for('static', filename='img/favicon.svg') }}" type="image/svg+xml">

  <!--HTML header script -->
  <!-- <script src="https://unpkg.com/feedbackfin@^1" defer></script> -->
  <script src="{{ url_for('static', filename='js/index.umd.js') }}" defer></script>
  <script>
    window.feedbackfin = { config: {}, ...window.feedbackfin };
    window.feedbackfin.config.url = "/feedback";
  </script>
  <script>
    window.onload = function() {
      if(sessionStorage.getItem('charity')){
        document.getElementById('select-label-id').textContent = "Charity selected";
      }

      let myMediaQuery = window.matchMedia('(max-width:1023px)')
      if(!myMediaQuery.matches){
        if (sessionStorage.getItem('toggle') == 'Opt in') {
          document.getElementById("toggle-on-icon").style.display = "block";
          document.getElementById("toggle-off-icon").style.display = "none";
          document.getElementById("static-ad-box").style.display = "none";
          document.getElementById('opt-text-id').textContent = "Ads for Charity";
        } else{
          document.getElementById("toggle-off-icon").style.display = "block";
          document.getElementById("toggle-on-icon").style.display = "none";
          document.getElementById("static-ad-box").style.display = "block";
          document.getElementById('opt-text-id').textContent = "Opt-out of Ads";
        }
      }
    }

    function toggleCharity() {
      const charityDropdown = document.getElementById('charity-dropdown');
      if (charityDropdown.classList.contains('close-dropdown')) {
        if (sessionStorage.getItem('charity')) {
          document.getElementById(sessionStorage.getItem('charity')).checked = true;
        }
        charityDropdown.classList.remove('close-dropdown');
        charityDropdown.classList.add('open-dropdown');
      } else {
        charityDropdown.classList.remove('open-dropdown');
        charityDropdown.classList.add('close-dropdown');
      }
    }

    function isCharitySelected() {
      const radioButtons = document.querySelectorAll('input[name="charity-list"]');
      for (const radioButton of radioButtons) {
        if (radioButton.checked) {
          return radioButton; // At least one radio button is selected
        }
      }
      return false; // No radio button is selected
    }

    function selectCharity() {
      let selected_radio = isCharitySelected();
      if (selected_radio) {
        document.getElementById('select-label-id').textContent = "Charity selected";
        const charityDropdown = document.getElementById('charity-dropdown');
        charityDropdown.classList.remove('open-dropdown');
        charityDropdown.classList.add('close-dropdown');

        sessionStorage.setItem('charity', selected_radio.id);
      }
    }

    function redirectToTarget(target_url, default_charity) {
        let charity = default_charity;
        if(sessionStorage.getItem('charity')){
          charity = sessionStorage.getItem('charity');
          // sessionStorage.setItem('charity', default_charity);
        }
        // Make an HTTP request to the Flask backend
        fetch('/redirect_to_target/'+charity+'/'+target_url, {
          method: 'GET'
        });
    }

    function toggleOptOut(id) {
      if (id == 'toggle-on-icon') {
        sessionStorage.setItem('toggle', 'Opt out');
        document.getElementById("toggle-off-icon").style.display = "block";
        document.getElementById("toggle-on-icon").style.display = "none";
        document.getElementById("static-ad-box").style.display = "block";
        document.getElementById('opt-text-id').textContent = "Opt-out of Ads";
      } else{
        sessionStorage.setItem('toggle', 'Opt in');
        document.getElementById("toggle-on-icon").style.display = "block";
        document.getElementById("toggle-off-icon").style.display = "none";
        document.getElementById("static-ad-box").style.display = "none";
        document.getElementById('opt-text-id').textContent = "Ads for Charity";
      }
    }

  </script>
  <!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5765281256889800"
    crossorigin="anonymous"></script> -->
</head>

<body class="{{ endpoint }}_endpoint">
  <main id="main_{{  self._TemplateReference__context.name|replace(" simple/", "" )|replace(".html", "" ) }}"
    class="{{body_class}}">
    {% if errors %}
    <div class="dialog-error" role="alert">
      <a href="#" class="close" aria-label="close" title="close">×</a>
      <ul>
        {% for message in errors %}
        <li>{{ message }}</li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}

    <nav id="links_on_top">
      {%- from 'simple/icons.html' import icon_big -%}
      {% if results %}
      <a href="https://donorbox.org/socialsearch" class="link_on_top_donate">
        <button class="donate-btn">Donate</button>
      </a>
      <a href="https://www.wikihow.com/Change-Your-Home-Page" class="link_on_top_default">{{
        icon_big('set-default') }}<span>{{ _('Set as Default') }}</span></a>
      {% endif %}
      {%- block linkto_about -%}
      <a href="{{ url_for('info', pagename='about') }}" class="link_on_top_about">{{
        icon_big('information-circle-outline') }}<span>{{ _('About') }}</span></a>
      {%- endblock -%}
      {%- block linkto_donate -%}
      {%- if donation_url -%}
      <a href="{{ donation_url }}" class="link_on_top_donate">{{ icon_big('heart-outline') }}<span>{{ _('Donate')
          }}</span></a>
      {%- endif -%}
      {%- endblock -%}
      {%- block linkto_preferences -%}
      <a href="{{ url_for('preferences') }}" class="link_on_top_preferences">{{ icon_big('menu-outline') }}<span>{{
          _('Preferences') }}</span></a>
      {%- endblock -%}
    </nav>
    {% block header %}
    {% endblock %}
    {% block content %}
    {% endblock %}
  </main>
  <footer>
    <p>
      {{ _('Powered by') }} <a href="{{ url_for('info', pagename='about') }}">searxng</a> - {{ searx_version }} — {{
      _('a privacy-respecting, open metasearch engine') }}<br />
      <a href="{{ searx_git_url }}">{{ _('Source code') }}</a>
      | <a href="{{ get_setting('brand.issue_url') }}">{{ _('Issue tracker') }}</a>
      {% if enable_metrics %}| <a href="{{ url_for('stats') }}">{{ _('Engine stats') }}</a>{% endif %}
      {% if get_setting('brand.public_instances') %}
      | <a href="{{ get_setting('brand.public_instances') }}">{{ _('Public instances') }}</a>
      {% endif %}
      {% if get_setting('general.privacypolicy_url') %}
      | <a href="{{ get_setting('general.privacypolicy_url') }}">{{ _('Privacy policy') }}</a>
      {% endif %}
      {% if get_setting('general.contact_url') %}
      | <a href="{{ get_setting('general.contact_url') }}">{{ _('Contact instance maintainer') }}</a>
      {% endif %}
    </p>
  </footer>
  <!--[if gte IE 9]>-->
  <script src="{{ url_for('static', filename='js/searxng.min.js') }}"></script>
  <!--<![endif]-->
</body>

</html>
